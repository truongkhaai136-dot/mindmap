<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bảng điều khiển PDF và Mindmap</title>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
            font-family: sans-serif;
            background-color: #eef2f9;
        }

        #controls {
            padding: 15px;
            background-color: #fff;
            text-align: center;
            border-bottom: 1px solid #ddd;
            box-sizing: border-box;
        }

        #controls input {
            width: 35%;
            padding: 10px;
            margin: 0 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        #controls button {
            padding: 10px 20px;
            border: none;
            background-color: #007bff;
            color: white;
            border-radius: 4px;
            cursor: pointer;
        }

        #controls button:hover {
            background-color: #0056b3;
        }
        
        /* -- PHẦN CSS NÂNG CẤP -- */
        .dashboard-container {
            display: grid;
            /* Sử dụng biến CSS để dễ dàng thay đổi bằng JavaScript */
            grid-template-columns: var(--left-width, 1fr) 10px var(--right-width, 2fr);
            height: calc(100vh - 75px);
            padding: 8px;
            box-sizing: border-box;
            gap: 0; /* Bỏ khoảng cách gap */
        }

        .dashboard-iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            background-color: #fff;
        }

        /* Style cho thanh kéo phân chia */
        #resizer {
            background-color: #ccc;
            cursor: col-resize; /* Đổi con trỏ chuột khi di vào */
            position: relative;
            z-index: 10;
            margin: 0 4px;
            border-radius: 5px;
        }
    </style>
</head>
<body>

    <div id="controls">
        <input type="text" id="pdf-input" placeholder="Dán link PDF vào đây...">
        <input type="text" id="mindmap-input" placeholder="Dán link Mindmap vào đây...">
        <button id="load-button">Tải giao diện</button>
    </div>

    <div class="dashboard-container" id="container">
        <iframe id="pdf-viewer" class="dashboard-iframe" title="Trình xem PDF"></iframe>
        
        <div id="resizer"></div> 

        <iframe id="mindmap-viewer" class="dashboard-iframe" title="Mindmap từ văn bản"></iframe>
    </div>

    <script>
        // --- Code cũ để tải nội dung iframe ---
        const loadButton = document.getElementById('load-button');
        const pdfInput = document.getElementById('pdf-input');
        const mindmapInput = document.getElementById('mindmap-input');
        const pdfIframe = document.getElementById('pdf-viewer');
        const mindmapIframe = document.getElementById('mindmap-viewer');

        loadButton.addEventListener('click', function() {
            const pdfUrl = pdfInput.value;
            const mindmapUrl = mindmapInput.value;

            if (pdfUrl.trim() !== "") {
                pdfIframe.src = pdfUrl;
            }

            if (mindmapUrl.trim() !== "") {
                mindmapIframe.src = mindmapUrl;
            }
        });

        // --- PHẦN JAVASCRIPT MỚI ĐỂ XỬ LÝ KÉO THẢ ---
        const resizer = document.getElementById('resizer');
        const container = document.getElementById('container');
        let isResizing = false;

        resizer.addEventListener('mousedown', function(e) {
            e.preventDefault();
            isResizing = true;
            // Thêm sự kiện cho cả trang để bắt việc di chuột và thả chuột
            document.addEventListener('mousemove', handleMouseMove);
            document.addEventListener('mouseup', stopResizing);
        });

        function handleMouseMove(e) {
            if (!isResizing) return;

            // Tính toán vị trí mới của thanh chia
            const containerRect = container.getBoundingClientRect();
            const newLeftWidth = e.clientX - containerRect.left;

            // Giới hạn độ rộng tối thiểu để tránh bị co lại quá nhỏ
            if (newLeftWidth > 100 && (containerRect.width - newLeftWidth) > 100) {
                const totalWidth = container.offsetWidth;
                const leftWidthPercent = (newLeftWidth / totalWidth) * 100;
                const rightWidthPercent = 100 - leftWidthPercent;

                // Cập nhật biến CSS
                container.style.setProperty('--left-width', `${leftWidthPercent}%`);
                container.style.setProperty('--right-width', `${rightWidthPercent}%`);
            }
        }

        function stopResizing() {
            isResizing = false;
            // Gỡ bỏ các sự kiện khi đã thả chuột
            document.removeEventListener('mousemove', handleMouseMove);
            document.removeEventListener('mouseup', stopResizing);
        }
    </script>

</body>
</html>
